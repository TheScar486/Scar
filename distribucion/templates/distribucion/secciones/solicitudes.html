<link rel="stylesheet" href="{% static 'css/solicitudes.css' %}">

<div class="section-container">
    <!-- Barra de herramientas integrada -->
    <div class="section-container">
        <!-- Barra de herramientas integrada -->
        <div id="mensajeExito" class="alert alert-success" style="display: none;">
            Solicitud creada correctamente
        </div>
        <div class="tools-bar">
            <div class="search-container">
                <span class="search-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" width="16" height="16">
                        <path d="M416 208c0 45.9-14.9 88.3-40 122.7L502.6 457.4c12.5 12.5 12.5 32.8 0 45.3s-32.8 12.5-45.3 0L330.7 376c-34.4 25.2-76.8 40-122.7 40C93.1 416 0 322.9 0 208S93.1 0 208 0S416 93.1 416 208zM208 352a144 144 0 1 0 0-288 144 144 0 1 0 0 288z"/>
                    </svg>
                </span>
                <input type="text" placeholder="Buscar..." class="search-input" id="searchInput" autocomplete="off">
            </div>
            
            <!-- Selector de Grupos añadido aquí -->
            <div class="group-selector">
                <select class="group-select" id="groupSelect">
                    <option value="">Seleccionar grupo</option>
                    <option value="Ebenezer Melchro #1">Ebenezer Melchro #1</option>
                    <option value="Ebenezer Melchro #2">Ebenezer Melchor #2</option>
                    <option value="Ebenezer La Libertad">Ebenezer La Libertad</option>
                    <option value="Ebenezer El Cruzadero">Ebenezer El Cruzadero</option>
                </select>
            </div>
        
            <div class="action-buttons">
                <button class="action-btn cant">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512" width="14" height="14">
                        <path d="M58.9 42.1c3-6.1 9.6-9.6 16.3-8.7L320 64 564.8 33.4c6.7-.8 13.3 2.7 16.3 8.7l41.7 83.4c9 17.9-.6 39.6-19.8 45.1L439.6 217.3c-13.9 4-28.8-1.9-36.2-14.3L320 64 236.6 203c-7.4 12.4-22.3 18.3-36.2 14.3L37.1 170.6c-19.3-5.5-28.8-27.2-19.8-45.1L58.9 42.1zM321.1 128l54.9 91.4c14.9 24.8 44.6 36.6 72.5 28.6L576 211.6l0 167c0 22-15 41.2-36.4 46.6l-204.1 51c-10.2 2.6-20.9 2.6-31 0l-204.1-51C79 419.7 64 400.5 64 378.5l0-167L191.6 248c27.8 8 57.6-3.8 72.5-28.6L318.9 128l2.2 0z"/>
                    </svg>
                    Cantidad
                </button>
                
                <button class="action-btn danger">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512" width="14" height="14">
                        <path d="M135.2 17.7L128 32 32 32C14.3 32 0 46.3 0 64S14.3 96 32 96l384 0c17.7 0 32-14.3 32-32s-14.3-32-32-32l-96 0-7.2-14.3C307.4 6.8 296.3 0 284.2 0L163.8 0c-12.1 0-23.2 6.8-28.6 17.7zM416 128L32 128 53.2 467c1.6 25.3 22.6 45 47.9 45l245.8 0c25.3 0 46.3-19.7 47.9-45L416 128z"/>
                    </svg>
                    Eliminar
                </button>
                
                <button class="action-btn success" id="guardarBtn">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512" width="14" height="14">
                        <path d="M64 32C28.7 32 0 60.7 0 96L0 416c0 35.3 28.7 64 64 64l320 0c35.3 0 64-28.7 64-64l0-320c0-35.3-28.7-64-64-64L64 32zM337 209L209 337c-9.4 9.4-24.6 9.4-33.9 0l-64-64c-9.4-9.4-9.4-24.6 0-33.9s24.6-9.4 33.9 0l47 47L303 175c9.4-9.4 24.6-9.4 33.9 0s9.4 24.6 0 33.9z"/>
                    </svg>
                    Guardar
                </button>
            </div>
        </div>

        <div class="solicitudes-table-container">
            <table class="solicitudes-data-table">
                <thead>
                    <tr>
                        <th>Código</th>
                        <th>Descripción</th>
                        <th>departamento</th>
                        <th>Cant.</th>
                    </tr>
                </thead>
                <tbody id="mainTableBody">
                    <!-- Más filas se generarán dinámicamente -->
                </tbody>
            </table>
        </div>
    </div>
<script src="{% static 'js/solicitudes.js' %}"></script>
<script src="{% static 'js/modal_solicitudes.js' %}"></script>

<link rel="stylesheet" href="{% static 'css/modal_solicitudes.css' %}">

<div id="searchModal" class="modal">
    <div class="modal-content">
        <!-- Encabezado -->
        <div class="modal-header">
            <h2>Búsqueda de Productos</h2>
            <span class="close">&times;</span>
        </div>
        
        <!-- Controles superiores -->
        <div class="modal-controls">
            <!-- Barra de búsqueda -->
            <div class="modal-search-container">
                <span class="modal-search-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" width="16" height="16">
                        <path d="M416 208c0 45.9-14.9 88.3-40 122.7L502.6 457.4c12.5 12.5 12.5 32.8 0 45.3s-32.8 12.5-45.3 0L330.7 376c-34.4 25.2-76.8 40-122.7 40C93.1 416 0 322.9 0 208S93.1 0 208 0S416 93.1 416 208zM208 352a144 144 0 1 0 0-288 144 144 0 1 0 0 288z"/>
                    </svg>
                </span>
                <input type="text" placeholder="Buscar productos..." class="modal-search-input" id="modalSearchInput" autocomplete="off">
            </div>
            
            <!-- Botones de acción -->
            <div class="modal-buttons">
                <button type="button" class="btn btn-filter" id="btnFilter">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512">
                        <path d="M3.9 54.9C10.5 40.9 24.5 32 40 32l432 0c15.5 0 29.5 8.9 36.1 22.9s4.6 30.5-5.2 42.5L320 320.9 320 448c0 12.1-6.8 23.2-17.7 28.6s-23.8 4.3-33.5-3l-64-48c-8.1-6-12.8-15.5-12.8-25.6l0-79.1L9 97.3C-.7 85.4-2.8 68.8 3.9 54.9z"/>
                    </svg>
                    <span>Filtrar</span>
                </button>
            </div>
            <!-- Dropdown de filtros (fuera de modal-buttons) -->
            <div class="filter-dropdown" id="filterDropdown" style="display: none;">
                <div class="filter-options">
                    <label>
                        <input type="radio" name="filterType" value="all" checked> Todos los campos
                    </label>
                    <label>
                        <input type="radio" name="filterType" value="category"> Solo categoría
                    </label>
                    <label>
                        <input type="radio" name="filterType" value="provider"> Solo proveedor
                    </label>
                    <label>
                        <input type="radio" name="filterType" value="code"> Solo código
                    </label>
                    <label>
                        <input type="radio" name="filterType" value="description"> Solo descripción
                    </label>
                </div>
            </div>
        </div>
        
        <!-- Tabla de resultados -->
        <div class="table-container">
            <div class="table-responsive">
                <table class="data-table">
                    <thead>
                        <tr>
                            <th>Código</th>
                            <th>Descripción</th>
                            <th>Departamento</th>
                            <th>Stock</th>
                            <th>Precio</th>
                        </tr>
                    </thead>
                    <tbody id="tableBody">
                        <!-- Los datos se cargarán aquí dinámicamente -->
                    </tbody>
                </table>
            </div>
            
            <!-- Indicador de carga -->
            <div id="loadingIndicator" class="loading-indicator">
                <div class="spinner"></div>
                <span>Cargando más artículos...</span>
            </div>
        </div>
    </div>
</div>