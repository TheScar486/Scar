<style>
.tools-bar {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 1.5rem;
    flex-wrap: wrap;
    gap: 1rem;
}

.search-container {
    position: relative;
    flex-grow: 1;
    max-width: 400px;
}

.search-input {
    padding: 0.6rem 1rem 0.6rem 2.5rem;
    border: 1px solid #E5E7EB;
    border-radius: 6px;
    width: 100%;
    font-size: 0.9rem;
    transition: all 0.3s ease;
    background-color: white;
}

/* Estilo para el número de pedido */
.alert.alert-info.mt-3 {
    transition: all 0.3s ease;
    display: flex;
    align-items: center;
    justify-content: space-between;
}

/* Botón de copiar */
.btn-outline-secondary {
    margin-left: 10px;
    padding: 0.15rem 0.5rem;
}

/* Animación para el mensaje principal */
#mensajeExito {
    transition: opacity 0.5s ease;
}

/* Estilos para el selector de grupos */
.group-selector {
    margin-right: 15px;
}

.group-select {
    padding: 8px 12px;
    border-radius: 4px;
    border: 1px solid #ddd;
    background-color: white;
    font-size: 14px;
    cursor: pointer;
}

.group-select:focus {
    outline: none;
    border-color: #4a90e2;
    box-shadow: 0 0 0 2px rgba(74, 144, 226, 0.2);
}

.search-icon {
    position: absolute;
    left: 1rem;
    top: 50%;
    transform: translateY(-50%);
    color: #6B7280;
}

.action-buttons {
    display: flex;
    gap: 0.75rem;
}

.action-btn {
    display: inline-flex;
    align-items: center;
    gap: 0.5rem;
    padding: 0.6rem 1rem;
    background-color: white;
    border: 1px solid #E5E7EB;
    border-radius: 6px;
    font-size: 0.9rem;
    transition: all 0.3s ease;
    color: #1F2937;
}

.action-btn svg {
    width: 14px;
    height: 14px;
    fill: currentColor;
}

.action-btn.cant {
    color: #44bfef;
    border-color: rgba(68, 185, 239, 0.3);
}

.action-btn.success {
    color: #10B981;
    border-color: rgba(16, 185, 129, 0.3);
}

.action-btn.danger {
    color: #EF4444;
    border-color: rgba(239, 68, 68, 0.3);
}

.action-btn:hover {
    background-color: #f5f5f5;
}

.action-btn.cant:hover {
    background-color: rgba(68, 239, 225, 0.1);
}

.action-btn.success:hover {
    background-color: rgba(16, 185, 129, 0.1);
}

.action-btn.danger:hover {
    background-color: rgba(239, 68, 68, 0.1);
}

/* Contenedor principal con scroll */
.solicitudes-table-container {
    width: 100%;
    overflow-y: auto;
    border-radius: 8px;
    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
    margin-top: 1rem;
    background-color: white;
    max-height: calc(100vh - 200px);
    display: block;
}

/* Contenedor principal con scroll */
.solicitudes-table-container {
    width: 100%;
    overflow-y: auto;
    border-radius: 8px;
    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
    margin-top: 1rem;
    background-color: white;
    max-height: calc(100vh - 200px);
    display: block;
}

/* Estructura de tabla completa - CON CAMBIOS APLICADOS */
.solicitudes-data-table {
    width: 100%;
    border-collapse: collapse;
    font-size: 1rem; /* Cambio 1: Tamaño de texto reducido (13px) */
    table-layout: fixed;
    font-family: 'Segoe UI', Roboto, -apple-system, sans-serif; /* Cambio 2: Tipografía moderna */
}

/* Cabecera fija */
.solicitudes-data-table thead {
    position: sticky;
    top: 0;
    z-index: 10;
    background-color: #f8fafc;
}

/* Celdas y filas - CON CAMBIOS APLICADOS */
.solicitudes-data-table th, 
.solicitudes-data-table td {
    padding: 0.9rem 1rem; /* Cambio 3: Altura de fila reducida (de 0.625rem a 0.5rem) */
    border-bottom: 1px solid #f1f5f9;
    text-align: left;
}

.solicitudes-data-table th {
    font-weight: 500;
    color: #1e293b;
    border-bottom-width: 2px;
    font-size: 1.0rem; /* Tamaño reducido para headers (12px) */
    text-transform: uppercase;
    letter-spacing: 0.5px;
}

/* Filas alternas */
.solicitudes-data-table tbody tr:nth-child(even) {
    background-color: #f8fafc;
}

/* Efecto hover */
.solicitudes-data-table tbody tr:hover {
    background-color: #f1f5f9;
}

/* Anchos de columna */
.solicitudes-data-table th:nth-child(1),
.solicitudes-data-table td:nth-child(1) { width: 15%; min-width: 80px; }

.solicitudes-data-table th:nth-child(2),
.solicitudes-data-table td:nth-child(2) { width: 55%; min-width: 200px; }

.solicitudes-data-table th:nth-child(3),
.solicitudes-data-table td:nth-child(3) { width: 20%; min-width: 120px; }

.solicitudes-data-table th:nth-child(4),
.solicitudes-data-table td:nth-child(4) { width: 10%; min-width: 60px; text-align: center; }

/* Fila seleccionada */
.solicitudes-data-table tbody tr.selected-row {
    background-color: #e0f2fe !important;
    border-left: 3px solid #0ea5e9;
}

/* Estilos responsivos */
@media (max-width: 768px) {
    .solicitudes-table-container {
        max-height: calc(100vh - 180px);
    }
    
    .solicitudes-data-table th,
    .solicitudes-data-table td {
        padding: 0.5rem 0.75rem;
        font-size: 0.8125rem;
    }
    
    .solicitudes-data-table th:nth-child(3),
    .solicitudes-data-table td:nth-child(3) {
        display: none;
    }
    
    /* Reajuste de anchos en móviles */
    .solicitudes-data-table th:nth-child(1),
    .solicitudes-data-table td:nth-child(1) {
        width: 20%;
    }
    
    .solicitudes-data-table th:nth-child(2),
    .solicitudes-data-table td:nth-child(2) {
        width: 65%;
    }
    
    .solicitudes-data-table th:nth-child(4),
    .solicitudes-data-table td:nth-child(4) {
        width: 15%;
    }
}

@media (max-width: 480px) {
    .solicitudes-data-table th:nth-child(1),
    .solicitudes-data-table td:nth-child(1) {
        width: 25%;
    }
    
    .solicitudes-data-table th:nth-child(2),
    .solicitudes-data-table td:nth-child(2) {
        width: 75%;
    }
    
    .solicitudes-data-table th:nth-child(4),
    .solicitudes-data-table td:nth-child(4) {
        display: none;
    }
}


/* Mejorar visibilidad de la fila seleccionada */
.selected-row {
    background-color: rgba(0, 123, 255, 0.2) !important;
    border-left: 4px solid #ff0000 !important;

}

/* Efecto hover para resaltar al pasar el mouse */
.data-table tbody tr:hover {
    background-color: rgba(0, 123, 255, 0.1);
    cursor: pointer;
}

:root {
    --primary: #3b82f6;
    --secondary: #10b981;
    --light-gray: #e5e7eb;
    --dark: #111827;
    --danger: #ef4444;
}

/* Estructura básica del modal */
.modal {
    display: none;
    position: fixed;
    z-index: 1000;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(0, 0, 0, 0.5);
    justify-content: center;
    align-items: center;
    animation: fadeIn 0.3s ease-out;
}

.modal-content {
    background-color: white;
    margin: 2% auto;
    padding: 1.5rem;
    border-radius: 8px;
    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
    width: 90%;
    max-width: 1400px;
    max-height: 90vh;
    display: flex;
    flex-direction: column;
}

@keyframes fadeIn {
    from { opacity: 0; }
    to { opacity: 1; }
}

/* Encabezado */
.modal-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 1.5rem;
    position: relative;
}

.modal-header h2 {
    font-size: 1.25rem;
    font-weight: 600;
    margin: 0;
    width: 100%;
    text-align: center;
}

/* Botón de cerrar */
.close {
    position: absolute;
    right: 1rem;
    top: 50%;
    transform: translateY(-50%);
    font-size: 1.8rem;
    font-weight: bold;
    color: var(--danger);
    cursor: pointer;
    transition: all 0.2s ease;
    line-height: 1;
}

.close:hover {
    transform: translateY(-50%) scale(1.1);
}

/* CONTROLES SUPERIORES - NUEVA ESTRUCTURA */
.modal-controls {
    display: flex;
    justify-content: space-between; /* Separa input y botones */
    align-items: center;
    margin-bottom: 1.5rem;
    gap: 1rem;
    width: 100%;
}

/* Contenedor de búsqueda (izquierda) */
.modal-search-container {
    position: relative;
    flex-grow: 1; /* Ocupa todo el espacio disponible */
    min-width: 250px;
    max-width: 600px; /* Ancho máximo para el input */
}

/* Botones (derecha) */
.modal-buttons {
    display: flex;
    gap: 0.75rem;
    margin-left: auto; /* Empuja los botones a la derecha */
    flex-shrink: 0; /* Evita que se reduzcan */
}

/* ESTILOS DEL INPUT (sin cambios) */
.modal-search-input {
    width: 100%;
    padding: 0.65rem 1rem 0.65rem 2.5rem;
    border: 1px solid var(--light-gray);
    border-radius: 6px;
    font-size: 0.95rem;
    transition: all 0.3s ease;
    background-color: #f9fafb;
}

.modal-search-input:focus {
    outline: none;
    border-color: var(--primary);
    box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.2);
}

.modal-search-icon {
    position: absolute;
    left: 12px;
    top: 50%;
    transform: translateY(-50%);
    color: #6b7280;
}

/* AJUSTES RESPONSIVOS */
@media (max-width: 768px) {
    .modal-controls {
        flex-direction: column; /* Apila en móviles */
    }
    
    .modal-search-container {
        width: 100%;
        max-width: 100%;
    }
    
    .modal-buttons {
        margin-left: 0;
        width: 100%;
        justify-content: flex-end; /* Alinea botones a la derecha */
    }
}

@media (max-width: 480px) {
    .modal-buttons {
        justify-content: space-between; /* Distribuye botones en móviles pequeños */
    }
    
    .btn {
        flex-grow: 1; /* Hace que los botones ocupen espacio disponible */
        justify-content: center;
    }
}

.btn {
    display: inline-flex;
    align-items: center;
    gap: 0.5rem;
    padding: 0.65rem 1.25rem;
    border-radius: 6px;
    font-size: 0.95rem;
    font-weight: 500;
    cursor: pointer;
    transition: all 0.3s ease;
    border: 1px solid var(--light-gray);
    background-color: white;
    color: var(--dark);
}

.btn:hover {
    background-color: #f5f5f5;
}

.btn-filter {
    color: var(--primary);
    border-color: rgba(59, 130, 246, 0.3);
}

.btn-filter:hover {
    background-color: rgba(59, 130, 246, 0.1);
}

.btn-add {
    color: var(--secondary);
    border-color: rgba(16, 185, 129, 0.3);
}

.btn-add:hover {
    background-color: rgba(16, 185, 129, 0.1);
}

.btn svg {
    width: 16px;
    height: 16px;
    fill: currentColor;
}

/* Tabla y contenido */
/* ESTILOS MINIMALISTAS PARA LA TABLA */
.table-container {
    flex: 1;
    overflow-y: auto;
    position: relative;
    margin-top: 10px;
    scroll-behavior: smooth;
}

/* CONTENEDOR RESPONSIVO - SIN BORDES */
.table-responsive {
    border-radius: 8px;
    overflow: hidden;
    margin-top: 15px;
    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.192);
}

/* TABLA MINIMALISTA */
.data-table {
    width: 100%;
    border-collapse: collapse;
    border-spacing: 0 8px;
}

/* ENCABEZADO FIJO */
.data-table thead th {
    position: sticky;
    top: -1px; /* Ajuste fino para alineación */
    z-index: 10; /* Asegura que esté sobre el contenido */
    background-color: #f3f4f6; /* Mismo color que antes */
    color: var(--dark);
    font-weight: 500;
    padding: 0.9rem 1rem;
    border-bottom: 2px solid var(--light-gray);
    box-shadow: 0 2px 2px -1px rgba(0, 0, 0, 0.1); /* Sombra sutil */
}

.data-table th,
.data-table td {
    border-left: none !important;
    border-right: none !important;
    border-top: none;
    border-bottom: 1px solid rgba(0, 0, 0, 0.05); /* Solo línea inferior sutil */
    padding: 0.75rem 1rem;
    text-align: left;
}

/* AJUSTES PARA EL SCROLL */
.data-table tbody {
    display: block; /* Permite el scroll */
    overflow-y: auto;
    max-height: calc(60vh - 50px); /* Ajusta según necesidades */
}

/* ESTILOS PARA FILAS ALTERNAS - VERSIÓN GARANTIZADA */
.data-table tbody tr:nth-child(odd) {
    background-color: #ffffff !important; /* Fondo blanco para filas impares */
}

.data-table tbody tr:nth-child(even) {
    background-color: rgba(155, 193, 255, 0.15); /* Fondo gris claro para filas pares */
}

/* Estilos para el mensaje de no resultados */
.data-table tr.no-results td {
    color: #dc3545;
    padding: 20px;
    text-align: center;
    font-weight: bold;
}

/* EFECTO HOVER */
.data-table tbody tr:hover td {
    background-color: rgba(6, 88, 221, 0.15);
}

.data-table tr {
    display: table;
    width: 100%;
    table-layout: fixed;
}

/* RESPONSIVIDAD */
@media (max-width: 768px) {
    .data-table thead th {
        top: 0; /* Ajuste para móviles */
    }
    
    .data-table tbody {
        max-height: calc(50vh - 50px);
    }
}

/* COLUMNAS ESPECÍFICAS */
.data-table th:nth-child(1),
.data-table td:nth-child(1) {
    width: 15%;
}

.data-table th:nth-child(2),
.data-table td:nth-child(2) {
    width: 50%;
}

.data-table th:nth-child(3),
.data-table td:nth-child(3) {
    width: 15%;
}

.data-table th:nth-child(4),
.data-table td:nth-child(4) {
    width: 10%;
    text-align: center;
}

.data-table th:nth-child(5),
.data-table td:nth-child(5) {
    width: 10%;
    text-align: right;
}

/* Indicador de carga */
.loading-indicator {
    display: none;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    padding: 1.5rem;
    color: #6b7280;
}

.spinner {
    width: 40px;
    height: 40px;
    border: 4px solid rgba(59, 130, 246, 0.2);
    border-top-color: var(--primary);
    border-radius: 50%;
    animation: spin 1s linear infinite;
    margin-bottom: 1rem;
}

@keyframes spin {
    to { transform: rotate(360deg); }
}

/* Responsividad */
@media (max-width: 768px) {
    .modal-content {
        width: 95%;
        padding: 1rem;
    }
    
    .modal-controls {
        flex-direction: column;
    }
    
    .modal-search-container {
        min-width: 100%;
    }
    
    .modal-buttons {
        width: 100%;
        justify-content: flex-end;
    }
    
    .data-table th:nth-child(3),
    .data-table td:nth-child(3) {
        display: none;
    }
}

@media (max-width: 480px) {
    .modal-header {
        padding: 1rem 3rem 1rem 1rem;
    }
    
    .data-table th:nth-child(4),
    .data-table td:nth-child(4) {
        display: none;
    }
    
    .data-table th, 
    .data-table td {
        padding: 0.6rem;
    }
}

.filter-dropdown {
    position: absolute;
    right: 20px;
    top: 60px;
    background: white;
    border: 1px solid #ddd;
    border-radius: 4px;
    padding: 10px;
    box-shadow: 0 2px 10px rgba(0,0,0,0.1);
    z-index: 1000;
    width: 200px;
}

.filter-options {
    display: flex;
    flex-direction: column;
    gap: 8px;
}

.filter-options label {
    display: flex;
    align-items: center;
    gap: 8px;
    cursor: pointer;
    padding: 5px;
    border-radius: 4px;
    transition: background-color 0.2s;
}

.filter-options label:hover {
    background-color: #f0f0f0;
}

.modal-buttons {
    position: relative;
    display: flex;
    gap: 10px;
}
</style>
<div class="section-container">
    <!-- Barra de herramientas integrada -->
    <div class="section-container">
        <!-- Barra de herramientas integrada -->
        <div id="mensajeExito" class="alert alert-success" style="display: none;">
            Solicitud creada correctamente
        </div>
        <div class="tools-bar">
            <div class="search-container">
                <span class="search-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" width="16" height="16">
                        <path d="M416 208c0 45.9-14.9 88.3-40 122.7L502.6 457.4c12.5 12.5 12.5 32.8 0 45.3s-32.8 12.5-45.3 0L330.7 376c-34.4 25.2-76.8 40-122.7 40C93.1 416 0 322.9 0 208S93.1 0 208 0S416 93.1 416 208zM208 352a144 144 0 1 0 0-288 144 144 0 1 0 0 288z"/>
                    </svg>
                </span>
                <input type="text" placeholder="Buscar..." class="search-input" id="searchInput" autocomplete="off">
            </div>
            
            <!-- Selector de Grupos añadido aquí -->
            <div class="group-selector">
                <select class="group-select" id="groupSelect">
                    <option value="">Seleccionar grupo</option>
                    <option value="Ebenezer Melchro #1">Ebenezer Melchro #1</option>
                    <option value="Ebenezer Melchro #2">Ebenezer Melchor #2</option>
                    <option value="Ebenezer La Libertad">Ebenezer La Libertad</option>
                    <option value="Ebenezer El Cruzadero">Ebenezer El Cruzadero</option>
                </select>
            </div>
        
            <div class="action-buttons">
                <button class="action-btn cant">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512" width="14" height="14">
                        <path d="M58.9 42.1c3-6.1 9.6-9.6 16.3-8.7L320 64 564.8 33.4c6.7-.8 13.3 2.7 16.3 8.7l41.7 83.4c9 17.9-.6 39.6-19.8 45.1L439.6 217.3c-13.9 4-28.8-1.9-36.2-14.3L320 64 236.6 203c-7.4 12.4-22.3 18.3-36.2 14.3L37.1 170.6c-19.3-5.5-28.8-27.2-19.8-45.1L58.9 42.1zM321.1 128l54.9 91.4c14.9 24.8 44.6 36.6 72.5 28.6L576 211.6l0 167c0 22-15 41.2-36.4 46.6l-204.1 51c-10.2 2.6-20.9 2.6-31 0l-204.1-51C79 419.7 64 400.5 64 378.5l0-167L191.6 248c27.8 8 57.6-3.8 72.5-28.6L318.9 128l2.2 0z"/>
                    </svg>
                    Cantidad
                </button>
                
                <button class="action-btn danger">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512" width="14" height="14">
                        <path d="M135.2 17.7L128 32 32 32C14.3 32 0 46.3 0 64S14.3 96 32 96l384 0c17.7 0 32-14.3 32-32s-14.3-32-32-32l-96 0-7.2-14.3C307.4 6.8 296.3 0 284.2 0L163.8 0c-12.1 0-23.2 6.8-28.6 17.7zM416 128L32 128 53.2 467c1.6 25.3 22.6 45 47.9 45l245.8 0c25.3 0 46.3-19.7 47.9-45L416 128z"/>
                    </svg>
                    Eliminar
                </button>
                
                <button class="action-btn success" id="guardarBtn">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512" width="14" height="14">
                        <path d="M64 32C28.7 32 0 60.7 0 96L0 416c0 35.3 28.7 64 64 64l320 0c35.3 0 64-28.7 64-64l0-320c0-35.3-28.7-64-64-64L64 32zM337 209L209 337c-9.4 9.4-24.6 9.4-33.9 0l-64-64c-9.4-9.4-9.4-24.6 0-33.9s24.6-9.4 33.9 0l47 47L303 175c9.4-9.4 24.6-9.4 33.9 0s9.4 24.6 0 33.9z"/>
                    </svg>
                    Guardar
                </button>
            </div>
        </div>

        <div class="solicitudes-table-container">
            <table class="solicitudes-data-table">
                <thead>
                    <tr>
                        <th>Código</th>
                        <th>Descripción</th>
                        <th>departamento</th>
                        <th>Cant.</th>
                    </tr>
                </thead>
                <tbody id="mainTableBody">
                    <!-- Más filas se generarán dinámicamente -->
                </tbody>
            </table>
        </div>
    </div>
<script src="{% static 'js/solicitudes.js' %}"></script>
<script src="{% static 'js/modal_solicitudes.js' %}"></script>

<link rel="stylesheet" href="{% static 'css/modal_solicitudes.css' %}">

<div id="searchModal" class="modal">
    <div class="modal-content">
        <!-- Encabezado -->
        <div class="modal-header">
            <h2>Búsqueda de Productos</h2>
            <span class="close">&times;</span>
        </div>
        
        <!-- Controles superiores -->
        <div class="modal-controls">
            <!-- Barra de búsqueda -->
            <div class="modal-search-container">
                <span class="modal-search-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" width="16" height="16">
                        <path d="M416 208c0 45.9-14.9 88.3-40 122.7L502.6 457.4c12.5 12.5 12.5 32.8 0 45.3s-32.8 12.5-45.3 0L330.7 376c-34.4 25.2-76.8 40-122.7 40C93.1 416 0 322.9 0 208S93.1 0 208 0S416 93.1 416 208zM208 352a144 144 0 1 0 0-288 144 144 0 1 0 0 288z"/>
                    </svg>
                </span>
                <input type="text" placeholder="Buscar productos..." class="modal-search-input" id="modalSearchInput" autocomplete="off">
            </div>
            
            <!-- Botones de acción -->
            <div class="modal-buttons">
                <button type="button" class="btn btn-filter" id="btnFilter">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512">
                        <path d="M3.9 54.9C10.5 40.9 24.5 32 40 32l432 0c15.5 0 29.5 8.9 36.1 22.9s4.6 30.5-5.2 42.5L320 320.9 320 448c0 12.1-6.8 23.2-17.7 28.6s-23.8 4.3-33.5-3l-64-48c-8.1-6-12.8-15.5-12.8-25.6l0-79.1L9 97.3C-.7 85.4-2.8 68.8 3.9 54.9z"/>
                    </svg>
                    <span>Filtrar</span>
                </button>
            </div>
            <!-- Dropdown de filtros (fuera de modal-buttons) -->
            <div class="filter-dropdown" id="filterDropdown" style="display: none;">
                <div class="filter-options">
                    <label>
                        <input type="radio" name="filterType" value="all" checked> Todos los campos
                    </label>
                    <label>
                        <input type="radio" name="filterType" value="category"> Solo categoría
                    </label>
                    <label>
                        <input type="radio" name="filterType" value="provider"> Solo proveedor
                    </label>
                    <label>
                        <input type="radio" name="filterType" value="code"> Solo código
                    </label>
                    <label>
                        <input type="radio" name="filterType" value="description"> Solo descripción
                    </label>
                </div>
            </div>
        </div>
        
        <!-- Tabla de resultados -->
        <div class="table-container">
            <div class="table-responsive">
                <table class="data-table">
                    <thead>
                        <tr>
                            <th>Código</th>
                            <th>Descripción</th>
                            <th>Departamento</th>
                            <th>Stock</th>
                            <th>Precio</th>
                        </tr>
                    </thead>
                    <tbody id="tableBody">
                        <!-- Los datos se cargarán aquí dinámicamente -->
                    </tbody>
                </table>
            </div>
            
            <!-- Indicador de carga -->
            <div id="loadingIndicator" class="loading-indicator">
                <div class="spinner"></div>
                <span>Cargando más artículos...</span>
            </div>
        </div>
    </div>
</div>
